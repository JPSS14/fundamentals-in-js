<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Functions</title>
</head>

<body>
    <h1 class="main_title">Main Learning Line</h1>
    <script>
        function teste() {   // Uma função para testes de chamadas de funções
            return console.log("Rodou");
        }
        function abs(x) {        // Uma função para calcular o valor absoluto
            if (x >= 0)
                return x;
            else
                return -x;
        }
        document.write(`<div class='standard'> <h1>Valor Absoluto</h1> <p>${abs(10)}</p>  </div>`);

        function fatorial(n) {  // Uma função para calcular o fatorial de um número
            let product = 1;
            while (n > 1) {
                product *= n;
                n--;
            }
            return product;
        }
        document.write(`<div class='standard'> <h1>Fatorial</h1> ${fatorial(8)} </div>`);

        function testeDiv(text) {
            const t = document.getElementById("hello");
            if (!t) {
                p = document.createElement("div");
                p.id = "hello";
                p.innerHTML = "<h1>Hello World!</h1>";
                document.body.appendChild(p);
            }
            const pre = document.createElement("p");
            const texto = document.createTextNode(text);
            pre.appendChild(texto);
            p.appendChild(pre);
        }
        testeDiv("Div construida por JS");

        function forca(f, m, a) {   // Uma função para calcular a força
            if ((f == "f") || (f == "F")) {
                let resultado = "<h1>Força: F = M x A</h1>";
                resultado += "<p>" + m + "*" + a + " =  </p>";
                resultado += "<p>" + m * a + "N" + "</p>";
                return resultado;
            }
            else if ((a == "a") || (a == "A")) {
                let resultado = `<h1>Força: A = F / M</h1>`;
                resultado += `<p> ${f} / ${m} = </p>`;
                resultado += `<p>${f / m}</p>`;
                return `${resultado}  m/s²`;
            }
            else if ((m == "m") || (m == "M")) {
                let resultado = `<h1>Força: M = F / A</h1>`;
                resultado += `<p> ${f} / ${a} = </p>`;
                resultado += `<p> ${f / a}</p>`;
                return `${resultado}  kg`;
            }
        }
        // document.write("<div class='standard'>" + forca("F", 10, 25) + "</div>");
        document.write(`<div class='standard'> ${forca("F", 10, 25)}  </div>`);
        document.write(`<div class='standard'> ${forca(250, 10, "a")} </div>`);
        document.write(`<div class='standard'> ${forca(250, "m", 25)} </div>`);

        function centavos(c) {  // Uma função que prova que existe diferença entre números com ponto flutuante em js
            const teste1 = (c + 0.1) - c;
            const teste2 = (c + 0.2) - (c + 0.1);
            if (teste1 == teste2)
                return `${teste1} == ${teste2}`;
            else
                return `${teste1} != ${teste2}`;
        }
        document.write(`<div class="standard"> <h1>Problema do ponto flutuante</h1>${centavos(0.1)}</div>`);


        function escapeString() {
            const text = "Como eu posso escrever \"entre\", numa string?";
            return (`<div class="standard"> <h1>Escape string</h1>${text}</div>`);
        }
        document.write(escapeString());

        function fatorialForm() {
            const text = `<div class="standard" id="fatorialForm">
            <h1>Fatorial Form</h1>
            <input type="text" id="numeroFatorialForm" placeholder="Digite um número" class="input_standard">
            <button class="btn" onclick="fatorialFormCount()">Calcular</button>
            </div>`;
            return text;
        }
        function fatorialFormCount() {
            p = document.getElementById("fatorialForm");
            t = parseFloat(document.getElementById("numeroFatorialForm").value);
            document.body.appendChild(p);
            const result = fatorial(t);
            const a = ` ${t}! = ${result}`;
            const pre = document.createElement("p");
            pre.id = "fatorialResult";
            const text = document.createTextNode(a);
            pre.appendChild(text);
            p.appendChild(pre);
        }
        document.write(fatorialForm());

        function decimalBinario(numero) {
            return (numero >>> 0).toString(2);
        }

        document.write(`<div class="standard"><h1>Decimal para binário</h1> ${decimalBinario(11)} </div>`);


        function decimalBinarioForm() {
            const text = `<div class="standard" id="decimalBinarioForm">
            <h1>Decimal para binário</h1>
            <input type="text" id="numeroDecimalBinario" placeholder="Digite em um número" class="input_standard">
            <button class="btn" onclick="decimalBinarioFormCount()">Calcular</button>
            </div>`;
            return text;
        }

        function decimalBinarioFormCount() {
            const form = document.getElementById("decimalBinarioForm");
            const numero = parseFloat(document.getElementById("numeroDecimalBinario").value);
            document.body.appendChild(form);
            const result = decimalBinario(numero);
            const exemplo = `${numero} = ${result}`;
            const pre = document.createElement("p");
            pre.id = "decimalBinarioResult";
            const text = document.createTextNode(exemplo);
            pre.appendChild(text);
            form.appendChild(pre);
        }
        document.write(decimalBinarioForm());

        //INTERAÇÂO COM BOTÃO AINDA EM FASE DE TESTES E ESTUDO!
        // function menosButton() {
        //     var numero = document.querySelector("#numeroButtonInteracao").value;
        //     console.log(numero);
        //     numero.value -= parseFloat(1);
        //     console.log(numero);
        //     return numero;
        // }

        // function buttonInteracao() {
        //     var text = `<div class="standard">
        //     <h1>Interação com botão</h1>
        //     <button class="btn" id="menosButton" onclick="menosButton()">-</button>
        //     <input class="input_standard_small" type="text" id="numeroButtonInteracao" value=0>
        //     <button class="btn" id="maisButton">+</button>
        //     </div>`;
        //     return text;
        // }
        // document.write(buttonInteracao());

        function areaQuadrado(lado) {    // square area
            return lado * lado;
        }
        document.write(`<div class="standard"><h1>Área do quadrado</h1> ${areaQuadrado(8)}m² </div>`);

        function perimetroQuadrado(lado) {   // square perimeter
            return lado * 4;
        }
        document.write(`<div class="standard"><h1>Prerímetro do quadrado</h1> ${perimetroQuadrado(8)}m </div>`);

        function equacao(x, numero, numero2) {   // equação simples
            return (`x = ${numero2 - numero}`);
        }
        document.write(`<div class="standard"> <h1>Equação do 1º</h1> ${equacao("a", 78, 93)}</div>`);

        function equacaoSpecial(x) {            // equação utilizando string
            const numero = 10;
            const numero2 = 5;
            const variavel = x.slice(1, x.length);
            return `${x} + ${numero} = ${numero2} <br> ${x} = ${numero2} - ${numero} <br> x = ${numero2 - numero} / ${variavel} <br> x = ${(numero2 - numero) / variavel}`;
        }
        document.write(`<div class="standard"><h1>Equação especial</h1> ${equacaoSpecial(`x5`)} </div>`);



        // function equacaoForm(){
        //     const text = `<div class="standard">
        //     <h1>Equação Form</h1>
        //     <input type="text" id="numeroEquacao" class="input_standard">
        //     <button class="btn">Calcular</button>
        //     </div>`;
        //     return text;
        // }
        // document.write(equacaoForm());

        function cep() {
            const text = `<div class="standard">
            <h1>CEP API</h1>
            <input type="text" id="cep" class="input_standard" maxlength="9">
            <button class="btn" onclick="cepApi()">Calcular</button>
            <input type="text" class="input_standard" id="logradouro">
            <input type="text" class="input_standard" id="bairro">
            <input type="text" class="input_standard" id="localidade">
            <input type="text" class="input_standard" id="uf">
            </div>`;
            return text;
        }

        function cepApi() {
            const cep = document.querySelector("#cep");
            console.log(cep.value);
            const showData = (result)=>{
                for(const campo in result){
                    if(document.querySelector(`#${campo}`)){
                        document.querySelector(`#${campo}`).value = result[campo];
                    }
                }
            }

            cep.addEventListener("blur", (e) => {
                let search = cep.value.replace("-", "");
                const options = {
                    method: "GET",
                    mode: "cors",
                    cache: "default"
                }
                fetch(`https://viacep.com.br/ws/${search}/json/`, options)
                    .then(response => {
                        response.json()
                        .then(data => showData(data))
                    })
                    .cathc(e => console.log("Deu erro: " + e.message));
                    console.log(cep.value);
            });
        }
        document.write(cep());

        function dataAtualizada(){

            const data = new Date();

            const text = `<div class="standard">
            <h1>Data</h1>
            <p>${data}</p>
            `;
            return text;
        }
        document.write(dataAtualizada());
    </script>
</body>

</html>